{% extends "base.html" %}

{% block title %}{{ category.name }} - Indian Clothing Store{% endblock %}

{% block content %}
<div class="container">
    <!-- Category Header -->
    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h1>{{ category.name }}</h1>
        <p style="font-size: 1.1rem;">{{ category.description }}</p>
        <p style="margin-top: 0.5rem;"><strong>Age Group:</strong> {{ category.age_group }}</p>
    </div>

    <!-- Back Button -->
    <a href="{{ url_for('index') }}" style="color: #667eea; text-decoration: none; margin-bottom: 1rem; display: inline-block;">
        ‚Üê Back to Home
    </a>

    <!-- Products Count -->
    <h2 style="margin: 1rem 0;">{{ products|length }} Products Available</h2>

    <!-- Products Grid -->
    {% if products %}
    <div class="products-grid">
        {% for product in products %}
        <div class="product-card">
            <div class="product-image">
                üëï
            </div>
            <div class="product-info">
                <div class="product-name">{{ product.name }}</div>
                <div class="product-description">{{ product.description }}</div>
                <div class="rating">
                    {% for i in range(5) %}
                        {% if i < product.rating %}‚≠ê{% else %}‚òÜ{% endif %}
                    {% endfor %}
                    ({{ product.rating }})
                </div>
                <div class="product-price">
                    <span class="price">‚Çπ{{ product.price }}</span>
                    {% if product.original_price %}
                    <span class="original-price">‚Çπ{{ product.original_price }}</span>
                    <span class="discount">{{ ((product.original_price - product.price) / product.original_price * 100) | int }}% OFF</span>
                    {% endif %}
                </div>
                <p style="font-size: 0.85rem; color: #666; margin: 0.5rem 0;">
                    <strong>Sizes:</strong> {{ product.size }}<br>
                    <strong>Color:</strong> {{ product.color }}<br>
                    <strong>Brand:</strong> {{ product.brand }}
                </p>
                <p style="font-size: 0.85rem; color: {% if product.stock > 10 %}green{% elif product.stock > 0 %}orange{% else %}red{% endif %};">
                    {% if product.stock > 10 %}
                        In Stock
                    {% elif product.stock > 0 %}
                        Only {{ product.stock }} left!
                    {% else %}
                        Out of Stock
                    {% endif %}
                </p>
                {% if product.stock > 0 %}
                <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-primary btn-block">View Details</a>
                {% else %}
                <button class="btn btn-block" style="background: #ccc; cursor: not-allowed;" disabled>Out of Stock</button>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="background: white; padding: 3rem; text-align: center; border-radius: 10px;">
        <h3>No products available in this category yet.</h3>
        <p>Please check back later or explore other categories.</p>
        <a href="{{ url_for('index') }}" class="btn btn-primary" style="margin-top: 1rem;">Browse All Categories</a>
    </div>
    {% endif %}
</div>
{% endblock %}
